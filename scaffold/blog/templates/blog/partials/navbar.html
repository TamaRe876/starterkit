<nav class="mt-4 px-3">
  <a class="text-xl font-bold text-gray-100 block mb-6" href="/">Vibstream</a>
  <div class="mt-8 space-y-4">
      <form method="GET" action="/search" class="relative">
          <input required name="query" id="search" type="text" placeholder="Search" class="w-full px-4 py-2 text-gray-700 bg-gray-800 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-600">
          <button type="submit" class="absolute right-0 top-0 mt-2 mr-4">
              <svg class="h-5 w-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
          </button>
      </form>

  <ul class="space-y-2">

      <li><a href="{% url 'blog-home' %}" class="flex py-2.5 px-4 rounded transition duration-200 hover:bg-gray-700">Home</a></li>
      <li>
          <button class="flex items-center justify-between w-full py-2.5 px-4 rounded transition duration-200 hover:bg-gray-700" onclick="toggleDropdown('metaVerseMusic')">
              <span>MetaVerseMusic</span>
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
          </button>
          <ul id="metaVerseMusic" class="hidden pl-4 mt-2 space-y-2">
              <li><a href="{% url 'metaversemusic:nftsmarket' %}" class="block py-2 px-4 text-sm hover:bg-gray-700">NFT Marketplace</a></li>
              <li><a href="{% url 'metaversemusic:createnft' %}" class="block py-2 px-4 text-sm hover:bg-gray-700">Mint NFT</a></li>
              <li><a href="{% url 'metaversemusic:charts-list' %}" class="block py-2 px-4 text-sm hover:bg-gray-700">Charts</a></li>
              <li><a href="{% url 'metaversemusic:playlist-list' %}" class="block py-2 px-4 text-sm hover:bg-gray-700">Playlists</a></li>
              <li><a href="{% url 'metaversemusic:playlist-create' %}" class="block py-2 px-4 text-sm hover:bg-gray-700">Create Playlist</a></li>
          </ul>
      </li>
      <li>
          <button class="flex items-center justify-between w-full py-2.5 px-4 rounded transition duration-200 hover:bg-gray-700" onclick="toggleDropdown('newPostTitles')">
              <span>New Post Titles</span>
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
          </button>
          <ul id="newPostTitles" class="hidden pl-4 mt-2 space-y-2">
              {% for post in posts|slice:":5" %}
                  <li><a href="{% url 'post-detail' post.pk %}" class="block py-2 px-4 text-sm hover:bg-gray-700">{{ post.title }}</a></li>
              {% endfor %}
          </ul>
      </li>
      
      <li>
          <button class="flex items-center justify-between w-full py-2.5 px-4 rounded transition duration-200 hover:bg-gray-700" onclick="toggleDropdown('whoToFollow')">
              <span>Who to Follow</span>
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
          </button>
          <ul id="whoToFollow" class="hidden pl-4 mt-2 space-y-2">
              {% for user in random_users %}
                  <li><a href="{% url 'profile-detail-view' user.pk %}" class="block py-2 px-4 text-sm hover:bg-gray-700">{{ user.username }}</a></li>
              {% endfor %}
          </ul>
      </li>
  </ul>

 

      {% if user.is_authenticated %}
          <a href="{% url 'show-notifications' %}" class="block py-2 px-4 hover:bg-gray-700">Notifications</a>
          <a href="{% url 'room-enroll' %}" class="block py-2 px-4 hover:bg-gray-700">Chats</a>

          <div class="relative group">
              <button class="flex items-center justify-between w-full py-2 px-4 hover:bg-gray-700" onclick="toggleDropdown('vibes')">
                  <span>Vibes</span>
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
              </button>
              <ul id="vibes" class="hidden pl-4 mt-2 space-y-2">
                  <li><a href="{% url 'post-create' %}" class="block py-2 px-4 text-sm hover:bg-gray-700">Add Vibe</a></li>
                  <li><a href="{% url 'posts-follow-view' %}" class="block py-2 px-4 text-sm hover:bg-gray-700">Feeds</a></li>
                  <li><a href="{% url 'all-like' %}" class="block py-2 px-4 text-sm hover:bg-gray-700">Likes</a></li>
                  <li><a href="{% url 'all-save' %}" class="block py-2 px-4 text-sm hover:bg-gray-700">Saves</a></li>
                  <li><a href="{% url 'blog-home' %}" class="block py-2 px-4 text-sm hover:bg-gray-700">All Vibes</a></li>
                  <li><a href="{% url 'user-posts' user %}" class="block py-2 px-4 text-sm hover:bg-gray-700">My Vibes</a></li>
              </ul>
          </div>

          <div class="relative group">
              <button class="flex items-center justify-between w-full py-2 px-4 hover:bg-gray-700" onclick="toggleDropdown('userMenu')">
                  <span>{{user|truncatechars:"10"}}</span>
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
              </button>
              <ul id="userMenu" class="hidden pl-4 mt-2 space-y-2">
                  <li><a href="{% url 'profile' %}" class="block py-2 px-4 text-sm hover:bg-gray-700">Profile</a></li>
                 <i class="fas fa-settings mr-2"><a href="{% url 'profile' %}" class="block py-2 px-4 text-sm hover:bg-gray-700">Settings</a> <li></li>
                  <li><a href="{% url 'password_reset' %}" class="block py-2 px-4 text-sm hover:bg-gray-700">Change Password</a></li>
                  <li><a href="{% url 'logout' %}" class="block py-2 px-4 text-sm hover:bg-gray-700">Logout</a></li>
              </ul>
          </div>
      {% else %}
          <a href="{% url 'login' %}" class="block py-2 px-4 hover:bg-gray-700">Login</a>
          <a href="{% url 'register' %}" class="block py-2 px-4 hover:bg-gray-700">Sign Up</a>
      {% endif %}
  </div>
</nav>